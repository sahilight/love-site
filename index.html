<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>For You ‚Äî A Surprise ‚ù§Ô∏è</title>
<style>
  :root{
    --pink:#ff477e;
    --card:#fff;
    --muted:#666;
  }
  html,body{height:100%;margin:0;font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
  body{
    background: linear-gradient(135deg,#ffd1dc 0%, #ffe6f0 50%, #fff6f9 100%);
    display:grid;place-items:center;overflow:hidden;
  }

  /* Center card */
  .wrap{width:min(940px,94%); max-width:760px; position:relative; z-index:5;}
  .card{
    background:var(--card); border-radius:20px; padding:28px; box-shadow:0 20px 50px rgba(0,0,0,0.12);
    text-align:center; transform-origin:center; min-height:260px;
  }
  h1{margin:0 0 8px; font-size:clamp(24px,5.5vw,38px); color:var(--pink)}
  p{margin:0 0 16px; color:var(--muted); line-height:1.4}

  /* Buttons */
  .buttons{margin-top:12px}
  .btn{
    display:inline-block; padding:12px 20px; margin:8px; border-radius:999px; border:0; cursor:pointer; font-weight:700;
    user-select:none; font-size:16px;
  }
  .btn.primary{background:var(--pink); color:#fff;}
  .btn.ghost{background:#f1f1f1; color:#333;}

  /* little animations */
  .wiggle { animation: wiggle 0.6s ease; }
  @keyframes wiggle { 0%{transform:translateX(0)} 25%{transform:translateX(-10px)} 50%{transform:translateX(8px)} 75%{transform:translateX(-6px)} 100%{transform:translateX(0)} }

  /* steps / pages - stacked, only one visible */
  .step { display:none; opacity:0; transition: opacity .35s ease; }
  .step.active { display:block; opacity:1; }

  /* compliments list */
  .compliment{ font-size:18px; margin:12px 0; color:#333; opacity:0; transform:translateY(10px); transition: all .45s cubic-bezier(.2,.9,.3,1); }
  .compliment.show{ opacity:1; transform:translateY(0); }

  /* hearts */
  .heart {
    position:absolute; width:26px; height:26px; background:var(--pink);
    clip-path: polygon(50% 0%, 100% 38%, 82% 100%, 50% 82%, 18% 100%, 0% 38%);
    opacity:0.85; pointer-events:none; z-index:3;
    animation: floatUp linear forwards;
  }
  @keyframes floatUp {
    0% { transform: translateY(0) scale(0.8); opacity:.9; }
    100% { transform: translateY(-700px) translateX(40px) scale(1.1); opacity:0; }
  }

  /* locked */
  .locked { text-align:center; padding:40px; color:var(--muted); }

  /* small control row */
  .controls { margin-top:16px; display:flex; gap:8px; justify-content:center; align-items:center; }

  /* play button */
  .play-btn { padding:8px 12px; border-radius:8px; background:#fff7f9; border:1px solid rgba(0,0,0,0.05); cursor:pointer; }

  /* footer tiny */
  .meta { font-size:12px; color:#999; margin-top:14px; }
</style>
</head>
<body>
  <!-- floating hearts container lives on body via JS -->
  <div class="wrap">
    <!-- Locked view -->
    <div id="locked" class="locked" style="display:none;">
      <h2>üîí Private surprise</h2>
      <p>This page is private. You need the secret to open it.</p>
      <p class="meta">Share the link with the token like: ?t=6may&name=Soni</p>
    </div>

    <!-- Main interactive card -->
    <div id="mainCard" class="card" style="display:none;">
      <!-- Step 1 -->
      <div id="step1" class="step active">
        <h1>Hey <span id="name1">Soni</span> ‚Äî a little surprise üíå</h1>
        <p>Do you want to open this tiny secret I made just for you?</p>
        <div class="buttons">
          <button id="openYes" class="btn primary">Yes, open it ‚ú®</button>
          <button id="openNo" class="btn ghost">No, not now üôà</button>
        </div>
      </div>

      <!-- Step 2: trust -->
      <div id="step2" class="step">
        <h1>Do you trust me?</h1>
        <p>If yes ‚Äî promise there will be compliments, cheeky teasing, and maybe confetti.</p>
        <div class="buttons">
          <button id="trustYes" class="btn primary">I trust you üíñ</button>
          <button id="trustNo" class="btn ghost">Hmm... not yet üòÖ</button>
        </div>
      </div>

      <!-- Step 3: compliments -->
      <div id="step3" class="step">
        <h1>Okay ‚Äî here we go!</h1>
        <p>These are all true ‚Äî one at a time üíò</p>
        <div id="compliments">
          <div class="compliment" id="c1">Grishma... tuza naav jastach hot aahe, jase kahi unhalaat pan ek gaarva asava.</div>
          <div class="compliment" id="c2">Pan honestly, tuza ek smile disla ki, mala sagle seasons tumchya madhyech disayla lagtat.</div>
          <div class="compliment" id="c3">Tu boltatana jehva tuzya baal ghyaatat padtat na... te moment direct heart var jaun lagtat.</div>
          <div class="compliment" id="c4">Aso kaahi pan, tu jyaveli nazar karte na, asa vatata ki time slow zhala, ani mi fkt tuzya world madhe aalo.</div>
          <div class="compliment" id="c5">Tula impress karaycha prayatna nahiye mazha... karan tu already mazya thoughts madhe queen banun basliyes.</div>
        </div>
        <div class="controls">
          <button id="more" class="btn ghost">Show more</button>
          <button id="repeat" class="btn ghost">Repeat</button>
        </div>
      </div>

      <!-- Step 4: final -->
      <div id="step4" class="step">
        <h1>You're my everything ‚ù§Ô∏è</h1>
        <p>I‚Äôm grateful for you every day. Thank you for being you.</p>
        <div class="buttons">
          <button id="endClose" class="btn primary">Close ‚ù§Ô∏è</button>
          <button id="shareAgain" class="btn ghost">Show again</button>
        </div>
      </div>

      <div class="meta">Tip: If the music doesn't start, press Play.</div>
      <div style="height:6px"></div>
    </div>

    <!-- Music and tiny controls that show only when unlocked -->
    <div id="musicControls" style="display:none; text-align:center; margin-top:10px;">
      <button id="playPause" class="play-btn">‚èØ Play / Pause Music</button>
      <span style="margin-left:10px; color:#888; font-size:13px;">Background music</span>
    </div>
  </div>

  <!-- Background audio -->
  <audio id="bgMusic" loop preload="auto">
    <source src="https://www.bensound.com/bensound-music/bensound-romantic.mp3" type="audio/mpeg">
    <!-- If you later host your own mp3, replace the src above -->
  </audio>

  <!-- confetti lib -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

  <script>
  // ========== TOKEN LOCK ==========
  const VALID_TOKENS = new Set(["6may"]); // Password = 6 May
  const url = new URL(window.location.href);
  const token = url.searchParams.get("t");
  const nameParam = url.searchParams.get("name") || "Soni";

  const lockedEl = document.getElementById('locked');
  const mainCard = document.getElementById('mainCard');
  const musicControls = document.getElementById('musicControls');
  const bgMusic = document.getElementById('bgMusic');

  if (token && VALID_TOKENS.has(token)) {
    // unlock
    lockedEl.style.display = 'none';
    mainCard.style.display = 'block';
    musicControls.style.display = 'block';
    // set name in h1
    document.getElementById('name1').textContent = nameParam;
  } else {
    lockedEl.style.display = 'block';
    mainCard.style.display = 'none';
    musicControls.style.display = 'none';
  }

  // ========== STEP LOGIC ==========
  function showStep(n){
    // hide all
    document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
    document.getElementById('step'+n).classList.add('active');
  }

  // initial
  showStep(1);

  // Step1 buttons
  const openYes = document.getElementById('openYes');
  const openNo  = document.getElementById('openNo');
  openYes.addEventListener('click', ()=>{
    // small scale animation
    mainCard.style.transform = 'scale(0.995)';
    setTimeout(()=> mainCard.style.transform = '', 150);
    showStep(2);
  });
  openNo.addEventListener('mouseenter', (e)=>{
    // playful dodge: randomly move button a little and wiggle card
    openNo.classList.add('wiggle');
    setTimeout(()=>openNo.classList.remove('wiggle'), 650);
  });
  openNo.addEventListener('click', ()=>{
    // cheeky response
    alert("Aww, you've already peeked in my heart, didn't you? üòè");
  });

  // Step2 - trust
  const trustYes = document.getElementById('trustYes');
  const trustNo  = document.getElementById('trustNo');
  trustYes.addEventListener('click', ()=> {
    // start music (browsers may block autoplay, but we'll try)
    playMusicTry();
    // confetti celebration
    confetti({ particleCount: 180, spread: 80, origin: { y: 0.6 } });
    // proceed to compliments
    setTimeout(()=> showStep(3), 600);
    // start showing compliments sequence
    startCompliments();
  });
  trustNo.addEventListener('mouseenter', ()=> {
    trustNo.style.transform = `translate(${(Math.random()*140-70)}px, ${(Math.random()*30-15)}px)`;
    setTimeout(()=>trustNo.style.transform = '', 420);
  });
  trustNo.addEventListener('click', ()=>{
    alert("I get it ‚Äî trust is earned. But I promise it's all heart. üíõ");
  });

  // Step3 - compliments flow
  const compliments = Array.from(document.querySelectorAll('.compliment'));
  let compIndex = 0;
  function showCompliment(i){
    compliments.forEach(c => c.classList.remove('show'));
    if (i<compliments.length) compliments[i].classList.add('show');
  }
  function startCompliments(){
    compIndex = 0;
    showCompliment(compIndex);
  }
  document.getElementById('more').addEventListener('click', ()=>{
    compIndex++;
    if (compIndex >= compliments.length) {
      // go to final
      setTimeout(()=> showStep(4), 400);
    } else {
      showCompliment(compIndex);
      // sprinkle confetti softly for each new compliment
      confetti({ particleCount: 60, spread: 50, origin: { y: 0.7 } });
    }
  });
  document.getElementById('repeat').addEventListener('click', ()=>{
    compIndex = 0;
    showCompliment(compIndex);
  });

  // Step4 controls
  document.getElementById('endClose').addEventListener('click', ()=>{
    // stop music and give a nice alert
    try{ bgMusic.pause(); bgMusic.currentTime = 0; }catch(e){}
    alert("Thank you for being mine. üíñ");
  });
  document.getElementById('shareAgain').addEventListener('click', ()=>{
    showStep(1);
  });

  // ========== HEARTS (background) ==========
  function createHeart(){
    const heart = document.createElement('div');
    heart.className = 'heart';
    // random horizontal start
    heart.style.left = Math.random()*100 + 'vw';
    // random size
    const s = 14 + Math.random()*24;
    heart.style.width = s + 'px';
    heart.style.height = s + 'px';
    // random animation duration
    heart.style.animationDuration = (3 + Math.random()*4) + 's';
    document.body.appendChild(heart);
    setTimeout(()=> heart.remove(), 4200);
  }
  // create a few hearts initially and then regularly (but only if unlocked)
  let heartInterval;
  if (token && VALID_TOKENS.has(token)) {
    createHeart(); createHeart(); createHeart();
    heartInterval = setInterval(createHeart, 700);
  }

  // ========== MUSIC CONTROL ==========
  const playPause = document.getElementById('playPause');
  playPause.addEventListener('click', ()=> {
    if (bgMusic.paused) bgMusic.play().catch(()=>{/*ignored*/});
    else bgMusic.pause();
  });

  // try to start music when trustYes clicked (but browsers often block autoplay)
  function playMusicTry(){
    bgMusic.play().catch(()=> {
      // if blocked, show a small hint to click Play
      playPause.classList.add('wiggle');
      setTimeout(()=>playPause.classList.remove('wiggle'), 800);
    });
  }

  // ========== CLEANUP on unload ==========
  window.addEventListener('beforeunload', ()=> {
    try{ bgMusic.pause(); }catch(e){}
    clearInterval(heartInterval);
  });
  </script>
</body>
</html>

